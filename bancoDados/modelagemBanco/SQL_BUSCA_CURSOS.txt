CREATE DATABASE BUSCA_CURSOS
	USE BUSCA_CURSOS

CREATE TABLE ADMINISTRADOR
(
	ADM_INT_ID INT NOT NULL IDENTITY (1,1),
	ADM_STR_NOME VARCHAR(80) NOT NULL,
	ADM_STR_CPF CHAR(11) NOT NULL,
	ADM_STR_SENHA VARCHAR(20) NOT NULL,
	ADM_STR_DATAINSERCAO DATETIME NOT NULL,
	ADM_INT_SITUACAO INT NOT NULL,
	CONSTRAINT PK_ADMINISTRADOR_ID PRIMARY KEY (ADM_INT_ID),
	CONSTRAINT UK_CPF_ID UNIQUE (ADM_STR_CPF)
);

CREATE TABLE PLATAFORMA
(
	PLA_INT_ID INT NOT NULL IDENTITY (1,1),
	ADM_INT_ID INT NOT NULL,
	PLA_STR_NOME VARCHAR (80) NOT NULL,
	PLA_STR_URL VARCHAR (80) NOT NULL,
	PLA_STR_DESC VARCHAR (80) NOT NULL,
	PLA_INT_QUANTCURSO INT NOT NULL,
	CONSTRAINT PK_PLATAFORMA_ID PRIMARY KEY (PLA_INT_ID),
	CONSTRAINT UK_URL_ID UNIQUE (PLA_STR_URL)
);

ALTER TABLE PLATAFORMA
ADD CONSTRAINT FK_ADMINISTRADOR_PLATAFORMA_ID FOREIGN KEY (ADM_INT_ID)
		REFERENCES ADMINISTRADOR (ADM_INT_ID)

CREATE TABLE CATEGORIA
(
	CAT_INT_ID INT NOT NULL IDENTITY(1,1),
	CAT_STR_DESC VARCHAR(80) NOT NULL,
	CAT_STR_INSERCAO DATETIME NOT NULL,
	CONSTRAINT PK_CATEGORIA_ID PRIMARY KEY (CAT_INT_ID)
);

CREATE TABLE AREACATEGORIA(
	ACA_INT_ID INT  NOT NULL IDENTITY(1,1),
	CAT_INT_ID INT  NOT NULL,
	ACA_STR_INSERCAO DATETIME NOT NULL,
	ACA_INT_SITUACAO INT  NOT NULL,
	CONSTRAINT PK_AREACATEGORIA_ID PRIMARY KEY (ACA_INT_ID)
);

ALTER TABLE AREACATEGORIA
	ADD CONSTRAINT FK_AREACATEGORIA_CATEGORIA_ID FOREIGN KEY (CAT_INT_ID)
		REFERENCES CATEGORIA (CAT_INT_ID)

CREATE TABLE CURSO
(
	CUR_INT_ID INT  NOT NULL IDENTITY(1,1),
	ACA_INT_ID INT  NOT NULL,
	CUR_STR_TITULO INT  NOT NULL,
	CUR_STR_URL VARCHAR(80)  NOT NULL,
	CUR_STR_CERTIFICACAO VARCHAR(80) NOT NULL,
	CUR_FLO_QUANTHORA FLOAT  NOT NULL,
	CUR_STR_DESC VARCHAR(80) NOT NULL,
	CUR_STR_DATAINICIO DATETIME  NOT NULL,
	CUR_STR_NIVELENSINO VARCHAR(80) NOT NULL,
	CUR_STR_INSERCAO DATETIME NOT NULL,
	CONSTRAINT PK_CURSO_ID PRIMARY KEY (CUR_INT_ID)
);

ALTER TABLE CURSO
	ADD CONSTRAINT FK_CURSO_AREACATEGORIA_ID FOREIGN KEY (ACA_INT_ID)
		REFERENCES AREACATEGORIA (ACA_INT_ID)

CREATE TABLE USUARIO
(
	USU_INT_ID INT  NOT NULL IDENTITY(1,1),
	USU_STR_NOME VARCHAR(80) NOT NULL,
	USU_STR_EMAIL VARCHAR(80) NOT NULL,
	USU_STR_SENHA VARCHAR(80) NOT NULL,
	USU_STR_INSERCAO DATETIME  NOT NULL,
	USU_INT_SITUACAO INT NOT NULL,
	CONSTRAINT PK_USUARIO_ID PRIMARY KEY (USU_INT_ID),
	CONSTRAINT UK_EMAIL_ID UNIQUE (USU_STR_EMAIL)
);

CREATE TABLE FEEDBACK
(
	FEE_INT_ID INT  NOT NULL IDENTITY(1,1),
	USU_INT_ID INT  NOT NULL,
	FEE_STR_TITULO VARCHAR(80) NOT NULL,
	FEE_STR_DESC VARCHAR(80) NOT NULL,
	FEE_STR_AVALIACAO INT NOT NULL,
	FEE_STR_DATAPUBLICACAO DATETIME NOT NULL,
	FEE_STR_COMENTARIO VARCHAR(80) NOT NULL,
);

ALTER TABLE FEEDBACK
	ADD CONSTRAINT FK_FEEDBACK_USUARIO_ID FOREIGN KEY (USU_INT_ID)
		REFERENCES USUARIO (USU_INT_ID)

CREATE TABLE MENTOR
(
	MEN_INT_ID INT NOT NULL IDENTITY(1,1),
	MEN_STR_NOME VARCHAR(80) NOT NULL,
	MEN_STR_DATAINSERCAO DATETIME NOT NULL,
	MEN_INT_SITUACAO INT NOT NULL,
	CONSTRAINT PK_MENTOR_ID PRIMARY KEY (MEN_INT_ID)
);

ALTER TABLE FEEDBACK
	ADD CONSTRAINT PK_FEEDBACK_ID PRIMARY KEY (FEE_INT_ID)

CREATE TABLE MENTORIA
(
	MET_INT_ID INT NOT NULL IDENTITY(1,1),
	CUR_INT_ID INT NOT NULL,
	PLA_INT_ID INT NOT NULL,
	MEN_INT_ID INT NOT NULL,
	MET_STR_INSERCAO DATETIME NOT NULL,
	MET_INT_SITUACAO INT NOT NULL,
	CONSTRAINT PK_MENTORIA_ID PRIMARY KEY (MET_INT_ID)
);

ALTER TABLE MENTORIA
	ADD CONSTRAINT FK_MENTORIA_CURSO_ID FOREIGN KEY (CUR_INT_ID)
		REFERENCES CURSO (CUR_INT_ID)

ALTER TABLE MENTORIA
	ADD CONSTRAINT FK_MENTORIA_PLATAFORMA_ID FOREIGN KEY (PLA_INT_ID)
		REFERENCES PLATAFORMA (PLA_INT_ID)

ALTER TABLE MENTORIA
	ADD CONSTRAINT FK_MENTORIA_MENTOR_ID FOREIGN KEY (MEN_INT_ID)
		REFERENCES MENTOR (MEN_INT_ID)

CREATE TABLE PLATAFORMACURSO
(
	PLC_INT_ID INT NOT NULL IDENTITY(1,1),
	CUR_INT_ID INT NOT NULL,
	PLA_INT_ID INT NOT NULL,
	PLC_STR_DATAINSERCAO DATE NOT NULL,
	PLC_INT_SITUACAO INT NOT NULL,
	CONSTRAINT PK_PLATAFORMACURSO_ID PRIMARY KEY (PLC_INT_ID)
);

ALTER TABLE PLATAFORMACURSO
	ADD CONSTRAINT FK_PLATAFORMACURSO_CURSO_ID FOREIGN KEY (CUR_INT_ID)
		REFERENCES CURSO (CUR_INT_ID)

ALTER TABLE PLATAFORMACURSO
	ADD CONSTRAINT FK_PLATAFORMACURSO_PLATAFORMA_ID FOREIGN KEY (PLA_INT_ID)
		REFERENCES PLATAFORMA (PLA_INT_ID)

CREATE TABLE HISTORICOUSUARIO
(
	HIS_INT_ID INT NOT NULL,
	HIS_STR_INSERCAO DATETIME NOT NULL,
	HIS_STR_DESCRICAO VARCHAR(80) NOT NULL,
	PLC_INT_ID INT NOT NULL,
	USU_INT_ID INT NOT NULL,
	CUR_INT_ID INT NOT NULL,
	ACA_INT_ID INT NOT NULL,
	CONSTRAINT PK_HISTORICOUSUARIO_ID PRIMARY KEY (HIS_INT_ID)
);

ALTER TABLE HISTORICOUSUARIO
	ADD CONSTRAINT FK_HISTORICOUSUARIO_PLATAFORMACURSO_ID FOREIGN KEY (PLC_INT_ID)
		REFERENCES PLATAFORMACURSO (PLC_INT_ID)

ALTER TABLE HISTORICOUSUARIO
	ADD CONSTRAINT FK_HISTORICOUSUARIO_USUARIO_ID FOREIGN KEY (USU_INT_ID)
		REFERENCES USUARIO (USU_INT_ID)

ALTER TABLE HISTORICOUSUARIO
	ADD CONSTRAINT FK_HISTORICOUSUARIO_CURSO_ID FOREIGN KEY (CUR_INT_ID)
		REFERENCES CURSO (CUR_INT_ID)

ALTER TABLE HISTORICOUSUARIO
	ADD CONSTRAINT FK_HISTORICOUSUARIO_AREACATEGORIA_ID FOREIGN KEY (ACA_INT_ID)
		REFERENCES AREACATEGOR